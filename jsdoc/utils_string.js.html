<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/string.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/string.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @namespace qui.utils.string
 */

import * as ObjectUtils from '$qui/utils/object.js'


const REGEX_ESCAPE_CHARS = '.\\+*?[^]$(){}=!&lt;>|:-'


/**
 * Replace all occurrences of `oldStr` in `s` with `newStr`.
 * @alias qui.utils.string.replaceAll
 * @param {String} s
 * @param {String} oldStr
 * @param {String} newStr
 * @returns {String}
 */
export function replaceAll(s, oldStr, newStr) {
    let p
    while ((p = s.indexOf(oldStr)) >= 0) {
        s = s.substring(0, p) + newStr + s.substring(p + oldStr.length, s.length)
    }

    return s.toString()
}

/**
 * Replace percent-formatted placeholders in a string with given values.
 *
 * Placeholders can be given as `"%s"`, `"%d"` or `"%f"`, in which case `args` will be used, in order, to replace
 * them.
 *
 * Placeholders can also be given as `"%(name)s"`, `"%(name)d"` or `"%(name)f"`, in which case the first argument in
 * `args` will be used as an object that maps names to replacement values.
 *
 * @alias qui.utils.string.formatPercent
 * @param {String} text
 * @param {...*} args values used to replace the placeholders
 * @returns {String}
 */
export function formatPercent(text, ...args) {
    let rex = new RegExp('%[sdf]')
    let match, i = 0
    while ((match = text.match(rex))) {
        text = text.substring(0, match.index) + args[i] + text.substring(match.index + 2)
        i++
    }

    if (i) { /* %s format used */
        text = text.replace(new RegExp('%%', 'g'), '%')

        return text
    }

    let keywords = args[0] || {}

    ObjectUtils.forEach(keywords, function (key, value) {
        text = text.replace(new RegExp(`%\\(${key}\\)s`, 'g'), value.toString())
        text = text.replace(new RegExp(`%\\(${key}\\)d`, 'g'), value.toString())
        text = text.replace(new RegExp(`%\\(${key}\\)f`, 'g'), value.toString())
    })

    text = text.replace('%%', '%')

    return text
}

/**
 * Transform a regular text to its camel-case representation.
 * @alias qui.utils.string.camelize
 * @param {String} s
 * @returns {String}
 */
export function camelize(s) {
    s = s.replace(/(?:^|[-_])(\w)/g, function (_, c) {
        return c ? c.toUpperCase() : ''
    })

    return s.substr(0, 1).toLowerCase() + s.substr(1)
}

/**
 * Transform a camel-case string into its dash-separated representation.
 * @alias qui.utils.string.uncamelize
 * @param {String} s
 * @param {String} [chr] separator character (defaults to dash `"-"`)
 * @returns {String}
 */
export function uncamelize(s, chr = '-') {
    return s.replace(/([A-Z])/g, function ($1) {
        return chr + $1.toLowerCase()
    }).replace(new RegExp(`^${chr}`), '')
}

/**
 * Transform the starting letter of each word of a text to uppercase.
 * @alias qui.utils.string.title
 * @param {String} s
 * @returns {String}
 */
export function title(s) {
    s = s.replace(/\s(\w)/g, function (_, c) {
        return c ? ` ${c.toUpperCase()}` : ' '
    })

    return s.substr(0, 1).toUpperCase() + s.substr(1)
}

/**
 * Encode a string to UTF8.
 * @alias qui.utils.string.toUTF8
 * @param {String} s
 * @returns {String}
 */
export function toUTF8(s) {
    s = s.replace(new RegExp('\\r\\n'), '\n')
    let utf = ''

    for (let n = 0; n &lt; s.length; n++) {
        let c = s.charCodeAt(n)

        if (c &lt; 128) {
            utf += String.fromCharCode(c)
        }
        else if ((c > 127) &amp;&amp; (c &lt; 2048)) {
            utf += String.fromCharCode((c >> 6) | 192)
            utf += String.fromCharCode((c &amp; 63) | 128)
        }
        else {
            utf += String.fromCharCode((c >> 12) | 224)
            utf += String.fromCharCode(((c >> 6) &amp; 63) | 128)
            utf += String.fromCharCode((c &amp; 63) | 128)
        }
    }

    return utf
}

/**
 * Decode a string from UTF8.
 * @alias qui.utils.string.fromUTF8
 * @param {String} s
 * @returns {String}
 */
export function fromUTF8(s) {
    let result = ''
    let i = 0
    let c1 = 0
    let c2 = 0
    let c3 = 0

    while (i &lt; s.length) {
        c1 = s.charCodeAt(i)

        if (c1 &lt; 128) {
            result += String.fromCharCode(c1)
            i++
        }
        else if ((c1 > 191) &amp;&amp; (c1 &lt; 224)) {
            c2 = s.charCodeAt(i + 1)
            result += String.fromCharCode(((c1 &amp; 31) &lt;&lt; 6) | (c2 &amp; 63))
            i += 2
        }
        else {
            c2 = s.charCodeAt(i + 1)
            c3 = s.charCodeAt(i + 2)
            result += String.fromCharCode(((c1 &amp; 15) &lt;&lt; 12) | ((c2 &amp; 63) &lt;&lt; 6) | (c3 &amp; 63))
            i += 3
        }
    }

    return result
}

/**
 * Intelligently search for an input sequence in a string. All characters in the input sequence must be present in the
 * searched string, in the respective order.
 * @alias qui.utils.string.intelliSearch
 * @param {String} s string to search into
 * @param {String} search string to search for
 * @returns {?RegExpMatchArray}
 */
export function intelliSearch(s, search) {
    let rexStr = Array.prototype.map.call(search, function (c) {
        return `${REGEX_ESCAPE_CHARS.includes(c) ? '\\' : ''}${c}.*`
    }).join('')

    let rex = new RegExp(rexStr, 'i')

    return s.match(rex)
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="qui.html">qui</a></li><li><a href="qui.base.html">base</a></li><li><a href="qui.base.errors.html">errors</a></li><li><a href="qui.base.i18n.html">i18n</a></li><li><a href="qui.base.mixwith.html">mixwith</a></li><li><a href="qui.config.html">config</a></li><li><a href="qui.forms.html">forms</a></li><li><a href="qui.forms.commonfields.html">commonfields</a></li><li><a href="qui.forms.commonforms.html">commonforms</a></li><li><a href="qui.globalglass.html">globalglass</a></li><li><a href="qui.icons.html">icons</a></li><li><a href="qui.icons.defaultstock.html">defaultstock</a></li><li><a href="qui.icons.stocks.html">stocks</a></li><li><a href="qui.lists.html">lists</a></li><li><a href="qui.lists.commonitems.html">commonitems</a></li><li><a href="qui.lists.commonlists.html">commonlists</a></li><li><a href="qui.mainui.html">mainui</a></li><li><a href="qui.mainui.menubar.html">menubar</a></li><li><a href="qui.mainui.optionsbar.html">optionsbar</a></li><li><a href="qui.mainui.status.html">status</a></li><li><a href="qui.mainui.topbar.html">topbar</a></li><li><a href="qui.messages.html">messages</a></li><li><a href="qui.messages.commonmessageforms.html">commonmessageforms</a></li><li><a href="qui.messages.toast.html">toast</a></li><li><a href="qui.navigation.html">navigation</a></li><li><a href="qui.pages.html">pages</a></li><li><a href="qui.pages.commonpages.html">commonpages</a></li><li><a href="qui.pwa.html">pwa</a></li><li><a href="qui.sections.html">sections</a></li><li><a href="qui.tables.html">tables</a></li><li><a href="qui.tables.commoncells.html">commoncells</a></li><li><a href="qui.tables.commontables.html">commontables</a></li><li><a href="qui.theme.html">theme</a></li><li><a href="qui.utils.html">utils</a></li><li><a href="qui.utils.ajax.html">ajax</a></li><li><a href="qui.utils.array.html">array</a></li><li><a href="qui.utils.colors.html">colors</a></li><li><a href="qui.utils.cookies.html">cookies</a></li><li><a href="qui.utils.crypto.html">crypto</a></li><li><a href="qui.utils.css.html">css</a></li><li><a href="qui.utils.date.html">date</a></li><li><a href="qui.utils.gestures.html">gestures</a></li><li><a href="qui.utils.html.html">html</a></li><li><a href="qui.utils.misc.html">misc</a></li><li><a href="qui.utils.object.html">object</a></li><li><a href="qui.utils.promise.html">promise</a></li><li><a href="qui.utils.string.html">string</a></li><li><a href="qui.views.html">views</a></li><li><a href="qui.views.commonviews.html">commonviews</a></li><li><a href="qui.widgets.html">widgets</a></li><li><a href="qui.window.html">window</a></li></ul><h3>Classes</h3><ul><li><a href="qui.base.ConditionVariable.html">ConditionVariable</a></li><li><a href="qui.base.errors.AssertionError.html">AssertionError</a></li><li><a href="qui.base.errors.CancelledError.html">CancelledError</a></li><li><a href="qui.base.errors.NotImplementedError.html">NotImplementedError</a></li><li><a href="qui.base.errors.TimeoutError.html">TimeoutError</a></li><li><a href="qui.base.mixwith.MixinBuilder.html">MixinBuilder</a></li><li><a href="qui.base.Signal.html">Signal</a></li><li><a href="qui.base.SingletonMixin.html">SingletonMixin</a></li><li><a href="qui.base.Timer.html">Timer</a></li><li><a href="qui.forms.commonfields.CheckField.html">CheckField</a></li><li><a href="qui.forms.commonfields.ChoiceButtonsField.html">ChoiceButtonsField</a></li><li><a href="qui.forms.commonfields.ColorComboField.html">ColorComboField</a></li><li><a href="qui.forms.commonfields.ComboField.html">ComboField</a></li><li><a href="qui.forms.commonfields.CompositeField.html">CompositeField</a></li><li><a href="qui.forms.commonfields.CustomHTMLField.html">CustomHTMLField</a></li><li><a href="qui.forms.commonfields.EmailField.html">EmailField</a></li><li><a href="qui.forms.commonfields.JQueryUIField.html">JQueryUIField</a></li><li><a href="qui.forms.commonfields.LabelsField.html">LabelsField</a></li><li><a href="qui.forms.commonfields.NumericField.html">NumericField</a></li><li><a href="qui.forms.commonfields.PasswordField.html">PasswordField</a></li><li><a href="qui.forms.commonfields.PhoneField.html">PhoneField</a></li><li><a href="qui.forms.commonfields.ProgressDiskField.html">ProgressDiskField</a></li><li><a href="qui.forms.commonfields.PushButtonField.html">PushButtonField</a></li><li><a href="qui.forms.commonfields.SliderField.html">SliderField</a></li><li><a href="qui.forms.commonfields.TextAreaField.html">TextAreaField</a></li><li><a href="qui.forms.commonfields.TextField.html">TextField</a></li><li><a href="qui.forms.commonfields.UpDownField.html">UpDownField</a></li><li><a href="qui.forms.commonforms.OptionsForm.html">OptionsForm</a></li><li><a href="qui.forms.commonforms.PageForm.html">PageForm</a></li><li><a href="qui.forms.ErrorMapping.html">ErrorMapping</a></li><li><a href="qui.forms.Form.html">Form</a></li><li><a href="qui.forms.FormButton.html">FormButton</a></li><li><a href="qui.forms.FormField.html">FormField</a></li><li><a href="qui.forms.ValidationError.html">ValidationError</a></li><li><a href="qui.icons.Icon.html">Icon</a></li><li><a href="qui.icons.MultiStateSpritesIcon.html">MultiStateSpritesIcon</a></li><li><a href="qui.icons.Stock.html">Stock</a></li><li><a href="qui.icons.StockIcon.html">StockIcon</a></li><li><a href="qui.lists.commonitems.IconLabelListItem.html">IconLabelListItem</a></li><li><a href="qui.lists.commonlists.PageList.html">PageList</a></li><li><a href="qui.lists.List.html">List</a></li><li><a href="qui.lists.ListItem.html">ListItem</a></li><li><a href="qui.messages.commonmessageforms.ConfirmMessageForm.html">ConfirmMessageForm</a></li><li><a href="qui.messages.commonmessageforms.SimpleMessageForm.html">SimpleMessageForm</a></li><li><a href="qui.messages.commonmessageforms.StickySimpleMessageForm.html">StickySimpleMessageForm</a></li><li><a href="qui.messages.MessageForm.html">MessageForm</a></li><li><a href="qui.messages.StickyModalPageMixin.html">StickyModalPageMixin</a></li><li><a href="qui.messages.StickyModalProgressMessage.html">StickyModalProgressMessage</a></li><li><a href="qui.navigation.PageLoadError.html">PageLoadError</a></li><li><a href="qui.navigation.PageNotFoundError.html">PageNotFoundError</a></li><li><a href="qui.navigation.SectionLoadError.html">SectionLoadError</a></li><li><a href="qui.pages.commonpages.ModalProgressPage.html">ModalProgressPage</a></li><li><a href="qui.pages.commonpages.StructuredPageMixin.html">StructuredPageMixin</a></li><li><a href="qui.pages.PageMixin.html">PageMixin</a></li><li><a href="qui.pages.PagesContext.html">PagesContext</a></li><li><a href="qui.sections.HideCancelled.html">HideCancelled</a></li><li><a href="qui.sections.Section.html">Section</a></li><li><a href="qui.tables.commoncells.IconLabelTableCell.html">IconLabelTableCell</a></li><li><a href="qui.tables.commoncells.PushButtonTableCell.html">PushButtonTableCell</a></li><li><a href="qui.tables.commoncells.SimpleTableCell.html">SimpleTableCell</a></li><li><a href="qui.tables.commontables.PageTable.html">PageTable</a></li><li><a href="qui.tables.Table.html">Table</a></li><li><a href="qui.tables.TableCell.html">TableCell</a></li><li><a href="qui.tables.TableRow.html">TableRow</a></li><li><a href="qui.utils.crypto.HMACSHA256.html">HMACSHA256</a></li><li><a href="qui.utils.crypto.SHA256.html">SHA256</a></li><li><a href="qui.utils.URL.html">URL</a></li><li><a href="qui.utils.VisibilityManager.html">VisibilityManager</a></li><li><a href="qui.views.commonviews.IconLabelViewMixin.html">IconLabelViewMixin</a></li><li><a href="qui.views.commonviews.ProgressViewMixin.html">ProgressViewMixin</a></li><li><a href="qui.views.commonviews.StructuredViewMixin.html">StructuredViewMixin</a></li><li><a href="qui.views.ViewMixin.html">ViewMixin</a></li></ul><h3>Global</h3><ul><li><a href="global.html#cleanup">cleanup</a></li><li><a href="global.html#getHTML">getHTML</a></li><li><a href="global.html#getServiceWorker">getServiceWorker</a></li><li><a href="global.html#isClass">isClass</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#isServiceWorkerSupported">isServiceWorkerSupported</a></li><li><a href="global.html#makeToken">makeToken</a></li><li><a href="global.html#navigateInitial">navigateInitial</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#sendServiceWorkerMessage">sendServiceWorkerMessage</a></li><li><a href="global.html#serviceWorkerMessageSignal">serviceWorkerMessageSignal</a></li><li><a href="global.html#whenServiceWorkerReady">whenServiceWorkerReady</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Sat Jun 06 2020 19:58:38 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
