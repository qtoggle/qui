<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/object.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/object.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @namespace qui.utils.object
 */

import * as ArrayUtils from './array.js'


/**
 * Use Object's `hasOwnProperty` and never rely on whatever `hasOwnProperty` incoming objects have.
 * @private
 * @param {Object} obj
 * @param {String} prop
 * @returns {Boolean}
 */
function hasOwnProperty(obj, prop) {
    return Object.prototype.hasOwnProperty.call(obj, prop)
}

/**
 * Tells if a value is a pure object.
 * @param {*} value value to test
 * @returns {Boolean}
 */
export function isObject(value) {
    return (value != null) &amp;&amp; (value.constructor === Object)
}

/**
 * Create an object from a list of entries. Each entry is an array of two elements: the key and its associated value.
 * @alias qui.utils.object.fromEntries
 * @param {Array[]} entries
 * @returns {Object}
 */
export function fromEntries(entries) {
    let obj = {}
    entries.forEach(function (entry) {
        obj[entry[0]] = entry[1]
    })

    return obj
}

/**
 * Search an object for an entry that matches a condition and return the corresponding key.
 * @alias qui.utils.object.findKey
 * @param {Object} obj
 * @param {Function} func function that implements the search condition; it is called with value and key as arguments
 * @param {*} [thisArg] optional `this` argument to be used when calling `func`
 * @returns {String} the matched key, or `undefined` if no entry matched
 */
export function findKey(obj, func, thisArg = null) {
    let entry = Object.entries(obj).find(function (entry) {
        if (func.call(thisArg, entry[1], entry[0])) {
            return true
        }
    })

    if (entry) {
        return entry[0]
    }

    return undefined
}

/**
 * Search an object for an entry that matches a condition and return the corresponding value.
 * @alias qui.utils.object.findValue
 * @param {Object} obj
 * @param {Function} func function that implements the search condition; it is called with key and value as arguments
 * @param {*} [thisArg] optional `this` argument to be used when calling `func`
 * @returns {String} the matched value, or `undefined` if no entry matched
 */
export function findValue(obj, func, thisArg = null) {
    let entry = Object.entries(obj).find(function (entry) {
        if (func.call(thisArg, entry[0], entry[1])) {
            return true
        }
    })

    if (entry) {
        return entry[1]
    }

    return undefined
}

/**
 * Parse an object, calling a function for each entry.
 * @alias qui.utils.object.forEach
 * @param {Object} obj
 * @param {Function} func function to be called for each entry; it is called with the entry (array of key and value) as
 * argument
 * @param {*} [thisArg] optional `this` argument to be used when calling `func`
 * @param {Function} [sortKeyFunc] optional function used to extract key from each entry when sorting entries; no
 * sorting is performed unless this function is supplied
 */
export function forEach(obj, func, thisArg = null, sortKeyFunc = null) {
    let entries = Object.entries(obj)
    if (sortKeyFunc) {
        ArrayUtils.sortKey(entries, sortKeyFunc)
    }
    entries.forEach(function (entry) {
        func.call(thisArg, entry[0], entry[1])
    })
}

/**
 * Filter object entries. This function is similar to Array's `filter` method, but applied on objects.
 * @alias qui.utils.object.filter
 * @param {Object} obj
 * @param {Function} func a function called with each key and value as arguments; only entries for which this function
 * returns a true value will be kept
 * @param {*} [thisArg] optional `this` argument to be used when calling `func`
 * @returns {Object} the filtered object
 */
export function filter(obj, func, thisArg = null) {
    return fromEntries(Object.entries(obj).filter(entry => func.call(thisArg, entry[0], entry[1])))
}

/**
 * Map object entries. This function is similar to Array's `map` method, but applied on objects.
 * @alias qui.utils.object.map
 * @param {Object} obj
 * @param {Function} func a function called with each key and value as arguments; it is expected to return an array with
 * two elements, the mapped key and value
 * @param {*} [thisArg] optional `this` argument to be used when calling `func`
 * @returns {Object} the mapped object
 */
export function map(obj, func, thisArg = null) {
    return fromEntries(Object.entries(obj).map(entry => func.call(thisArg, entry[0], entry[1])))
}

/**
 * Map object keys.
 * @alias qui.utils.object.mapKey
 * @param {Object} obj
 * @param {Function} func a function called with each key and value as arguments; it is expected to return the mapped
 * key
 * @param {*} [thisArg] optional `this` argument to be used when calling `func`
 * @returns {Object} the mapped object
 */
export function mapKey(obj, func, thisArg = null) {
    return fromEntries(Object.entries(obj).map(entry => [func.call(thisArg, entry[0], entry[1]), entry[1]]))
}

/**
 * Map object values.
 * @alias qui.utils.object.mapValue
 * @param {Object} obj
 * @param {Function} func a function called with each value and key as arguments; it is expected to return the mapped
 * value
 * @param {*} [thisArg] optional `this` argument to be used when calling `func`
 * @returns {Object} the mapped object
 */
export function mapValue(obj, func, thisArg = null) {
    return fromEntries(Object.entries(obj).map(entry => [entry[0], func.call(thisArg, entry[1], entry[0])]))
}

/**
 * Assign values to an object, *in place*, but only if corresponding keys are missing.
 * @alias qui.utils.object.assignDefault
 * @param {Object} dest
 * @param {Object} src
 * @returns {Object} the given `dest` object
 */
export function assignDefault(dest, src) {
    Object.keys(src).forEach(function (key) {
        if (key in dest) {
            return
        }

        dest[key] = src[key]
    })

    return dest
}

/**
 * Combine two or more objects into a single object by merging their keys and values.
 * @alias qui.utils.object.combine
 * @param {...Object} objs objects to combine
 * @returns {Object} the combined object
 */
export function combine(...objs) {
    let combined = {}
    objs.forEach(function (obj) {
        Object.keys(obj).forEach(function (key) {
            combined[key] = obj[key]
        })
    })

    return combined
}

/**
 * Clone an object by copying its entries into a new object. Optionally recurse into inner objects and arrays.
 * @alias qui.utils.object.copy
 * @param {Object} orig original object to copy
 * @param {Boolean} [deep] set to `true` to perform a *deep* copy (defaults to `false`)
 * @returns {Object}
 */
export function copy(orig, deep = false) {
    if (deep) {
        if (orig === undefined || orig === null ||
            typeof orig === 'number' || typeof orig === 'string' ||
            typeof orig === 'boolean' || typeof orig === 'function') {

            return orig
        }
        else if (Array.isArray(orig)) {
            return orig.map(e => copy(e, /* deep = */ true))
        }
        else if (orig instanceof Object) {
            return map(orig, (k, v) => [k, copy(v, /* deep = */ true)])
        }
        else {
            return orig
        }
    }
    else {
        return fromEntries(Object.entries(orig))
    }
}

/**
 * Remove a key from an object, returning it.
 * @alias qui.utils.object.pop
 * @param {Object} obj
 * @param {String} key
 * @param {*} [def] an optional default value to return if key is missing
 * @returns {*}
 */
export function pop(obj, key, def = null) {
    if (!(key in obj)) {
        return def
    }

    let value = obj[key]
    delete obj[key]

    return value
}

/**
 * Insert a value into an object, but only if it's not already present, and return it.
 * @alias qui.utils.object.setDefault
 * @param {Object} obj
 * @param {String} key
 * @param {*} value
 * @returns {*}
 */
export function setDefault(obj, key, value) {
    if (key in obj) {
        return obj[key]
    }

    return (obj[key] = value)
}

/**
 * A deep equals() operator that will recursively compare any non-primitive objects to validate the equality.
 * @alias qui.utils.object.deepEquals
 * @param {Object} obj1 the first object of the comparison
 * @param {Object} obj2 the second object of the comparison
 * @returns {Boolean} `true` if the two objects are deeply equal, `false`otherwise
 */
export function deepEquals(obj1, obj2) {
    if (obj1 === obj2) {
        return true
    }

    if (typeof obj1 !== typeof obj2) {
        return false
    }

    if (Array.isArray(obj1)) {
        if (!Array.isArray(obj2)) {
            return false
        }

        if (obj1.length !== obj2.length) {
            return false
        }

        for (let i = 0; i &lt; obj1.length; i++) {
            if (!deepEquals(obj1[i], obj2[i])) {
                return false
            }
        }

        return true
    }
    else if (obj1 instanceof Object) {
        if (!(obj2 instanceof Object)) {
            return false
        }

        for (let key in obj1) {
            if (hasOwnProperty(obj1, key)) {
                if (!hasOwnProperty(obj2, key)) {
                    return false
                }

                if (!deepEquals(obj1[key], obj2[key])) {
                    return false
                }
            }
        }

        for (let key in obj2) {
            if (hasOwnProperty(obj2, key)) {
                if (!hasOwnProperty(obj1, key)) {
                    return false
                }
            }
        }

        return true
    }
    else {
        return false
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="qui.html">qui</a></li><li><a href="qui.base.html">base</a></li><li><a href="qui.base.errors.html">errors</a></li><li><a href="qui.base.i18n.html">i18n</a></li><li><a href="qui.base.mixwith.html">mixwith</a></li><li><a href="qui.config.html">config</a></li><li><a href="qui.forms.html">forms</a></li><li><a href="qui.forms.commonfields.html">commonfields</a></li><li><a href="qui.forms.commonforms.html">commonforms</a></li><li><a href="qui.globalglass.html">globalglass</a></li><li><a href="qui.icons.html">icons</a></li><li><a href="qui.icons.defaultstock.html">defaultstock</a></li><li><a href="qui.icons.stocks.html">stocks</a></li><li><a href="qui.lists.commonitems.html">commonitems</a></li><li><a href="qui.lists.commonlists.html">commonlists</a></li><li><a href="qui.mainui.html">mainui</a></li><li><a href="qui.mainui.menubar.html">menubar</a></li><li><a href="qui.mainui.optionsbar.html">optionsbar</a></li><li><a href="qui.mainui.status.html">status</a></li><li><a href="qui.mainui.topbar.html">topbar</a></li><li><a href="qui.messages.html">messages</a></li><li><a href="qui.messages.commonmessageforms.html">commonmessageforms</a></li><li><a href="qui.messages.toast.html">toast</a></li><li><a href="qui.navigation.html">navigation</a></li><li><a href="qui.pages.html">pages</a></li><li><a href="qui.pages.commonpages.html">commonpages</a></li><li><a href="qui.pwa.html">pwa</a></li><li><a href="qui.sections.html">sections</a></li><li><a href="qui.theme.html">theme</a></li><li><a href="qui.utils.html">utils</a></li><li><a href="qui.utils.ajax.html">ajax</a></li><li><a href="qui.utils.array.html">array</a></li><li><a href="qui.utils.colors.html">colors</a></li><li><a href="qui.utils.cookies.html">cookies</a></li><li><a href="qui.utils.crypto.html">crypto</a></li><li><a href="qui.utils.css.html">css</a></li><li><a href="qui.utils.date.html">date</a></li><li><a href="qui.utils.gestures.html">gestures</a></li><li><a href="qui.utils.html.html">html</a></li><li><a href="qui.utils.misc.html">misc</a></li><li><a href="qui.utils.object.html">object</a></li><li><a href="qui.utils.promise.html">promise</a></li><li><a href="qui.utils.string.html">string</a></li><li><a href="qui.views.html">views</a></li><li><a href="qui.views.commonviews.html">commonviews</a></li><li><a href="qui.widgets.html">widgets</a></li><li><a href="qui.window.html">window</a></li></ul><h3>Classes</h3><ul><li><a href="qui.base.ConditionVariable.html">ConditionVariable</a></li><li><a href="qui.base.errors.AssertionError.html">AssertionError</a></li><li><a href="qui.base.errors.NotImplementedError.html">NotImplementedError</a></li><li><a href="qui.base.errors.TimeoutError.html">TimeoutError</a></li><li><a href="qui.base.mixwith.MixinBuilder.html">MixinBuilder</a></li><li><a href="qui.base.Signal.html">Signal</a></li><li><a href="qui.base.SingletonMixin.html">SingletonMixin</a></li><li><a href="qui.base.Timer.html">Timer</a></li><li><a href="qui.forms.commonfields.CheckField.html">CheckField</a></li><li><a href="qui.forms.commonfields.ChoiceButtonsField.html">ChoiceButtonsField</a></li><li><a href="qui.forms.commonfields.ColorComboField.html">ColorComboField</a></li><li><a href="qui.forms.commonfields.ComboField.html">ComboField</a></li><li><a href="qui.forms.commonfields.CompositeField.html">CompositeField</a></li><li><a href="qui.forms.commonfields.EmailField.html">EmailField</a></li><li><a href="qui.forms.commonfields.JQueryUIField.html">JQueryUIField</a></li><li><a href="qui.forms.commonfields.LabelsField.html">LabelsField</a></li><li><a href="qui.forms.commonfields.NumericField.html">NumericField</a></li><li><a href="qui.forms.commonfields.PasswordField.html">PasswordField</a></li><li><a href="qui.forms.commonfields.PhoneField.html">PhoneField</a></li><li><a href="qui.forms.commonfields.ProgressDiskField.html">ProgressDiskField</a></li><li><a href="qui.forms.commonfields.PushButtonField.html">PushButtonField</a></li><li><a href="qui.forms.commonfields.SliderField.html">SliderField</a></li><li><a href="qui.forms.commonfields.TextField.html">TextField</a></li><li><a href="qui.forms.commonfields.UpDownField.html">UpDownField</a></li><li><a href="qui.forms.commonforms.OptionsForm.html">OptionsForm</a></li><li><a href="qui.forms.commonforms.PageForm.html">PageForm</a></li><li><a href="qui.forms.ErrorMapping.html">ErrorMapping</a></li><li><a href="qui.forms.Form.html">Form</a></li><li><a href="qui.forms.FormButton.html">FormButton</a></li><li><a href="qui.forms.FormField.html">FormField</a></li><li><a href="qui.forms.ValidationError.html">ValidationError</a></li><li><a href="qui.icons.Icon.html">Icon</a></li><li><a href="qui.icons.MultiStateSpritesIcon.html">MultiStateSpritesIcon</a></li><li><a href="qui.icons.Stock.html">Stock</a></li><li><a href="qui.icons.StockIcon.html">StockIcon</a></li><li><a href="qui.lists.commonitems.IconLabelListItem.html">IconLabelListItem</a></li><li><a href="qui.lists.List.html">List</a></li><li><a href="qui.lists.ListItem.html">ListItem</a></li><li><a href="qui.lists.PageList.html">PageList</a></li><li><a href="qui.messages.commonmessageforms.ConfirmMessageForm.html">ConfirmMessageForm</a></li><li><a href="qui.messages.commonmessageforms.SimpleMessageForm.html">SimpleMessageForm</a></li><li><a href="qui.messages.commonmessageforms.StickyConfirmMessageForm.html">StickyConfirmMessageForm</a></li><li><a href="qui.messages.commonmessageforms.StickySimpleMessageForm.html">StickySimpleMessageForm</a></li><li><a href="qui.messages.MessageForm.html">MessageForm</a></li><li><a href="qui.messages.StickyModalPageMixin.html">StickyModalPageMixin</a></li><li><a href="qui.messages.StickyModalProgressMessage.html">StickyModalProgressMessage</a></li><li><a href="qui.navigation.PageLoadError.html">PageLoadError</a></li><li><a href="qui.navigation.PageNotFoundError.html">PageNotFoundError</a></li><li><a href="qui.navigation.SectionLoadError.html">SectionLoadError</a></li><li><a href="qui.pages.commonpages.ModalProgressPage.html">ModalProgressPage</a></li><li><a href="qui.pages.commonpages.StructuredPageMixin.html">StructuredPageMixin</a></li><li><a href="qui.pages.PageMixin.html">PageMixin</a></li><li><a href="qui.pages.PagesContext.html">PagesContext</a></li><li><a href="qui.sections.Section.html">Section</a></li><li><a href="qui.utils.crypto.HMACSHA256.html">HMACSHA256</a></li><li><a href="qui.utils.crypto.SHA256.html">SHA256</a></li><li><a href="qui.utils.URL.html">URL</a></li><li><a href="qui.views.commonviews.StructuredViewMixin.html">StructuredViewMixin</a></li><li><a href="qui.views.ViewMixin.html">ViewMixin</a></li></ul><h3>Global</h3><ul><li><a href="global.html#cleanup">cleanup</a></li><li><a href="global.html#getHTML">getHTML</a></li><li><a href="global.html#getServiceWorker">getServiceWorker</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#navigateInitial">navigateInitial</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#sendServiceWorkerMessage">sendServiceWorkerMessage</a></li><li><a href="global.html#serviceWorkerMessageSignal">serviceWorkerMessageSignal</a></li><li><a href="global.html#serviceWorkerReadySignal">serviceWorkerReadySignal</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sun Mar 22 2020 09:22:48 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
